<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/script.js" type="text/javascript"></script>
    <title>Consultar o CPF</title>

</head>

<body>


    <form id="meuFormulario">
        <div class="logo-container">
            <img src="img/brasao.png" alt="Logo do Ministério" class="logo">
        </div>
        <h1>Ministério da Agricultura e Pecuária</h1>
        <h2>Governo Federal</h2>
        <h1>____________________________</h1>
        <br>
        <u><h2>Cadastro de Localização dos Concursados Nomeados em 2025</h2></u>
        <br>
        <div>
            <label for="cpf">Digite o CPF:</label>
            <input type="text" id="cpf" name="cpf" required> <br><br>
            <button type="button" onclick="consultarListaResultado()">Consultar</button>
            <label for="obs">Obs.: Ao clicar em "Consultar", aguarde alguns segundos até que seus dados
                apareçam.</label>
        </div>
        <br>
        <u><h2>Dados Encontrados:</h2></u>
        <div>
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" readonly>
        </div>
        <br>
        <div>
            <label for="cargo">Cargo:</label>
            <input type="text" id="cargo" name="cargo" readonly>
        </div>
        <br>
        <div>
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" placeholder="Informe seu e-mail pessoal." required>
        </div>
        <br>
        <br>
        <div>
            <u><h3>Escolha de Localidade:</h3></u>
            <label>Obs.: Favor selecionar todas as localidades sem repetição. Exemplo: Se o respectivo cargo possuir 5 (cinco) localidades de escolha, as 5 (cinco) primeiras opções de localidade deverão ser preenchidas e as demais opções deverão ser desconsideradas.</label><br>
            <label>1ª Opção:</label>
            <select id="municipio1" name="municipio1" placeholder="Selecione o município" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>2ª Opção:</label>
            <select id="municipio2" name="municipio2" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>3ª Opção:</label>
            <select id="municipio3" name="municipio3" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>4ª Opção:</label>
            <select id="municipio4" name="municipio4" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>5ª Opção:</label>
            <select id="municipio5" name="municipio5" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>6ª Opção:</label>
            <select id="municipio6" name="municipio6" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>7ª Opção:</label>
            <select id="municipio7" name="municipio7" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>8ª Opção:</label>
            <select id="municipio8" name="municipio8" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>9ª Opção:</label>
            <select id="municipio9" name="municipio9" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>10ª Opção:</label>
            <select id="municipio10" name="municipio10" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>11ª Opção:</label>
            <select id="municipio11" name="municipio11" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>12ª Opção:</label>
            <select id="municipio12" name="municipio12" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>13ª Opção:</label>
            <select id="municipio13" name="municipio13" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>14ª Opção:</label>
            <select id="municipio14" name="municipio14" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>15ª Opção:</label>
            <select id="municipio15" name="municipio15" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>16ª Opção:</label>
            <select id="municipio16" name="municipio16" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>17ª Opção:</label>
            <select id="municipio17" name="municipio17" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>18ª Opção:</label>
            <select id="municipio18" name="municipio18" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>19ª Opção:</label>
            <select id="municipio19" name="municipio19" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>20ª Opção:</label>
            <select id="municipio20" name="municipio20" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>21ª Opção:</label>
            <select id="municipio21" name="municipio21" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>22ª Opção:</label>
            <select id="municipio22" name="municipio22" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>23ª Opção:</label>
            <select id="municipio23" name="municipio23" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>24ª Opção:</label>
            <select id="municipio24" name="municipio24" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>25ª Opção:</label>
            <select id="municipio25" name="municipio25" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>26ª Opção:</label>
            <select id="municipio26" name="municipio26" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>27ª Opção:</label>
            <select id="municipio27" name="municipio27" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>28ª Opção:</label>
            <select id="municipio28" name="municipio28" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>29ª Opção:</label>
            <select id="municipio29" name="municipio29" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>30ª Opção:</label>
            <select id="municipio30" name="municipio30" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>31ª Opção:</label>
            <select id="municipio31" name="municipio31" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>32ª Opção:</label>
            <select id="municipio32" name="municipio32" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>33ª Opção:</label>
            <select id="municipio33" name="municipio33" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>34ª Opção:</label>
            <select id="municipio34" name="municipio34" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>35ª Opção:</label>
            <select id="municipio35" name="municipio35" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>36ª Opção:</label>
            <select id="municipio36" name="municipio36" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>37ª Opção:</label>
            <select id="municipio37" name="municipio37" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>38ª Opção:</label>
            <select id="municipio38" name="municipio38" disabled>
                <option value="">Selecione um município.</option>
            </select>
            <br>
            <br>
            <label>39ª Opção:</label>
            <select id="municipio39" name="municipio39" disabled>
                <option value="">Selecione um município.</option>
            </select><br>
            <br>
            <label>40ª Opção:</label>
            <select id="municipio40" name="municipio40" disabled>
                <option value="">Selecione um município.</option>
            </select><br>
            <br>
            <label>41ª Opção:</label>
            <select id="municipio41" name="municipio41" disabled>
                <option value="">Selecione um município.</option>
            </select><br>
            <br>
            <label>42ª Opção:</label>
            <select id="municipio42" name="municipio42" disabled>
                <option value="">Selecione um município.</option>
            </select><br>
            <br>
            <label>43ª Opção:</label>
            <select id="municipio43" name="municipio43" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>44ª Opção:</label>
            <select id="municipio44" name="municipio44" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>45ª Opção:</label>
            <select id="municipio45" name="municipio45" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>46ª Opção:</label>
            <select id="municipio46" name="municipio46" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>47ª Opção:</label>
            <select id="municipio47" name="municipio47" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>48ª Opção:</label>
            <select id="municipio48" name="municipio48" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>49ª Opção:</label>
            <select id="municipio49" name="municipio49" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>50ª Opção:</label>
            <select id="municipio50" name="municipio50" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>51ª Opção:</label>
            <select id="municipio51" name="municipio51" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>52ª Opção:</label>
            <select id="municipio52" name="municipio52" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>53ª Opção:</label>
            <select id="municipio53" name="municipio53" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>54ª Opção:</label>
            <select id="municipio54" name="municipio54" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>55ª Opção:</label>
            <select id="municipio55" name="municipio55" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>56ª Opção:</label>
            <select id="municipio56" name="municipio56" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>57ª Opção:</label>
            <select id="municipio57" name="municipio57" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>58ª Opção:</label>
            <select id="municipio58" name="municipio58" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>59ª Opção:</label>
            <select id="municipio59" name="municipio59" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>60ª Opção:</label>
            <select id="municipio60" name="municipio60" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>61ª Opção:</label>
            <select id="municipio61" name="municipio61" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>62ª Opção:</label>
            <select id="municipio62" name="municipio62" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>63ª Opção:</label>
            <select id="municipio63" name="municipio63" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>64ª Opção:</label>
            <select id="municipio64" name="municipio64" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>65ª Opção:</label>
            <select id="municipio65" name="municipio65" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>66ª Opção:</label>
            <select id="municipio66" name="municipio66" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>67ª Opção:</label>
            <select id="municipio67" name="municipio67" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>68ª Opção:</label>
            <select id="municipio68" name="municipio68" disabled>
                <option value="">Selecione um município.</option>
            </select><br><br>

            <label>69ª Opção:</label>
            <select id="municipio69" name="municipio69" disabled>
                <option value="">Selecione um município.</option>
            </select>
        </div>
        <br>
        <label>OBS.: Uma vez realizado o cadastro, não será permitida qualquer alteração. Dessa forma, sugerimos que
            confira todos os dados antes de salvá-los.</label>
        <br>
        <button type="button" onclick="salvarDadosParaPowerAutomate()">Salvar</button>
    </form>

    <div id="confirmModal" style="display: none;" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-box">
            <p>Após realizado o cadastro, não será possível qualquer alteração.</p>
            <p>Deseja confirmar a sua escolha?</p>
            <div class="modal-buttons">
                <button id="btnSim">SIM</button>
                <button id="btnNao">NÃO</button>
            </div>
        </div>
    </div>

</body>

</html>

<script>


    mascaraCPF();

    let dadosParaSalvar = null;


    async function salvarDadosParaPowerAutomate() {


        if (!verificarMunicipiosDuplicados()) return;

        // Armazenar dados antes da confirmação
        const cpf = document.getElementById('cpf').value;
        const nome = document.getElementById('nome').value;
        const cargo = document.getElementById('cargo').value;
        const email = document.getElementById('email').value.trim();
        const municipio1 = document.getElementById('municipio1').value;
        const municipio2 = document.getElementById('municipio2').value;
        const municipio3 = document.getElementById('municipio3').value;
        const municipio4 = document.getElementById('municipio4').value;
        const municipio5 = document.getElementById('municipio5').value;
        const municipio6 = document.getElementById('municipio6').value;
        const municipio7 = document.getElementById('municipio7').value;
        const municipio8 = document.getElementById('municipio8').value;
        const municipio9 = document.getElementById('municipio9').value;
        const municipio10 = document.getElementById('municipio10').value;
        const municipio11 = document.getElementById('municipio11').value;
        const municipio12 = document.getElementById('municipio12').value;
        const municipio13 = document.getElementById('municipio13').value;
        const municipio14 = document.getElementById('municipio14').value;
        const municipio15 = document.getElementById('municipio15').value;
        const municipio16 = document.getElementById('municipio16').value;
        const municipio17 = document.getElementById('municipio17').value;
        const municipio18 = document.getElementById('municipio18').value;
        const municipio19 = document.getElementById('municipio19').value;
        const municipio20 = document.getElementById('municipio20').value;
        const municipio21 = document.getElementById('municipio21').value;
        const municipio22 = document.getElementById('municipio22').value;
        const municipio23 = document.getElementById('municipio23').value;
        const municipio24 = document.getElementById('municipio24').value;
        const municipio25 = document.getElementById('municipio25').value;
        const municipio26 = document.getElementById('municipio26').value;
        const municipio27 = document.getElementById('municipio27').value;
        const municipio28 = document.getElementById('municipio28').value;
        const municipio29 = document.getElementById('municipio29').value;
        const municipio30 = document.getElementById('municipio30').value;
        const municipio31 = document.getElementById('municipio31').value;
        const municipio32 = document.getElementById('municipio32').value;
        const municipio33 = document.getElementById('municipio33').value;
        const municipio34 = document.getElementById('municipio34').value;
        const municipio35 = document.getElementById('municipio35').value;
        const municipio36 = document.getElementById('municipio36').value;
        const municipio37 = document.getElementById('municipio37').value;
        const municipio38 = document.getElementById('municipio38').value;
        const municipio39 = document.getElementById('municipio39').value;
        const municipio40 = document.getElementById('municipio40').value;
        const municipio41 = document.getElementById('municipio41').value;
        const municipio42 = document.getElementById('municipio42').value;
        const municipio43 = document.getElementById('municipio43').value;
        const municipio44 = document.getElementById('municipio44').value;
        const municipio45 = document.getElementById('municipio45').value;
        const municipio46 = document.getElementById('municipio46').value;
        const municipio47 = document.getElementById('municipio47').value;
        const municipio48 = document.getElementById('municipio48').value;
        const municipio49 = document.getElementById('municipio49').value;
        const municipio50 = document.getElementById('municipio50').value;
        const municipio51 = document.getElementById('municipio51').value;
        const municipio52 = document.getElementById('municipio52').value;
        const municipio53 = document.getElementById('municipio53').value;
        const municipio54 = document.getElementById('municipio54').value;
        const municipio55 = document.getElementById('municipio55').value;
        const municipio56 = document.getElementById('municipio56').value;
        const municipio57 = document.getElementById('municipio57').value;
        const municipio58 = document.getElementById('municipio58').value;
        const municipio59 = document.getElementById('municipio59').value;
        const municipio60 = document.getElementById('municipio60').value;
        const municipio61 = document.getElementById('municipio61').value;
        const municipio62 = document.getElementById('municipio62').value;
        const municipio63 = document.getElementById('municipio63').value;
        const municipio64 = document.getElementById('municipio64').value;
        const municipio65 = document.getElementById('municipio65').value;
        const municipio66 = document.getElementById('municipio66').value;
        const municipio67 = document.getElementById('municipio67').value;
        const municipio68 = document.getElementById('municipio68').value;
        const municipio69 = document.getElementById('municipio69').value;

        const cpfLimpo = cpf.replace(/\D/g, '').replace(/^0+/, '');

        const verificaEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (!verificaEmail.test(email)) {
            alert("Por favor, digite um e-mail válido.");
            return;
        }

        if (!cpfLimpo || !nome || !cargo || !municipio1) {
            alert('Os campos CPF, Nome e Cargo devem estar preenchidos e, ao menos, a 1ª opção de município.');
            return;
        }


        dadosParaSalvar = {
            cpf: cpfLimpo,
            nome: nome,
            cargo: cargo,
            email: email,
            Municipio1: municipio1,
            Municipio2: municipio2,
            Municipio3: municipio3,
            Municipio4: municipio4,
            Municipio5: municipio5,
            Municipio6: municipio6,
            Municipio7: municipio7,
            Municipio8: municipio8,
            Municipio9: municipio9,
            Municipio10: municipio10,
            Municipio11: municipio11,
            Municipio12: municipio12,
            Municipio13: municipio13,
            Municipio14: municipio14,
            Municipio15: municipio15,
            Municipio16: municipio16,
            Municipio17: municipio17,
            Municipio18: municipio18,
            Municipio19: municipio19,
            Municipio20: municipio20,
            Municipio21: municipio21,
            Municipio22: municipio22,
            Municipio23: municipio23,
            Municipio24: municipio24,
            Municipio25: municipio25,
            Municipio26: municipio26,
            Municipio27: municipio27,
            Municipio28: municipio28,
            Municipio29: municipio29,
            Municipio30: municipio30,
            Municipio31: municipio31,
            Municipio32: municipio32,
            Municipio33: municipio33,
            Municipio34: municipio34,
            Municipio35: municipio35,
            Municipio36: municipio36,
            Municipio37: municipio37,
            Municipio38: municipio38,
            Municipio39: municipio39,
            Municipio40: municipio40,
            Municipio41: municipio41,
            Municipio42: municipio42,
            Municipio43: municipio43,
            Municipio44: municipio44,
            Municipio45: municipio45,
            Municipio46: municipio46,
            Municipio47: municipio47,
            Municipio48: municipio48,
            Municipio49: municipio49,
            Municipio50: municipio50,
            Municipio51: municipio51,
            Municipio52: municipio52,
            Municipio53: municipio53,
            Municipio54: municipio54,
            Municipio55: municipio55,
            Municipio56: municipio56,
            Municipio57: municipio57,
            Municipio58: municipio58,
            Municipio59: municipio59,
            Municipio60: municipio60,
            Municipio61: municipio61,
            Municipio62: municipio62,
            Municipio63: municipio63,
            Municipio64: municipio64,
            Municipio65: municipio65,
            Municipio66: municipio66,
            Municipio67: municipio67,
            Municipio68: municipio68,
            Municipio69: municipio69
        };

        // Mostrar modal
        document.getElementById('confirmModal').style.display = 'flex';

    }

    document.getElementById('btnSim').addEventListener('click', async function () {
        const webhookUrl = 'https://prod-01.brazilsouth.logic.azure.com:443/workflows/1fb9782709ea489f8118a7c5e6408497/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=9ZFHCbVBb6WufeVspGOCEARPhsRlTz-umpMGruWualw';
        document.getElementById('confirmModal').style.display = 'none';

        try {
            const response = await fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dadosParaSalvar)
            });


            if (response.ok || response.status === 0) {
                alert('Dados cadastrados com sucesso!');
                limparFormulario();
                return 1;
            } else {
                alert('Erro ao salvar.');
                limparFormulario();
            }


        } catch (error) {
            alert('Erro inesperado ao enviar os dados.');
            limparFormulario();
        }
    });

    document.getElementById('btnNao').addEventListener('click', function () {
        document.getElementById('confirmModal').style.display = 'none';
        dadosParaSalvar = null;
    });


</script>

</body>

</html>
